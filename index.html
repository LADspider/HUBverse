<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUBverse - Tắt lơ ngơ - Bật HUBverse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap&subset=vietnamese,latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            background-color: #f7f9fc;
            color: #333;
        }
        .hero-section {
            background-color: #111827; /* Dark background for night sky */
            position: relative;
            overflow: hidden;
        }
        #hero-3d-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.8; /* Slightly more opaque for stars */
        }
        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hubverse-title {
            font-family: 'Quicksand', 'Helvetica Neue', Arial, sans-serif;
            font-weight: 700;
            color: #0077b6;
        }
        .nav-link {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            font-weight: 500;
            color: #4a5568;
            transition: color 0.3s ease, transform 0.2s ease, background-color 0.2s ease;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
        }
        .nav-link:hover, .nav-link.active-nav-link { /* Style for active nav link */
            color: #0077b6;
            background-color: #e0f7fa;
            transform: translateY(-2px);
        }
        .btn-login {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            background-color: #00b4d8;
            color: white;
            font-weight: 600;
            padding: 0.6rem 1.2rem;
            border-radius: 0.75rem;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 180, 216, 0.3);
        }
        .btn-login:hover {
            background-color: #0096c7;
            box-shadow: 0 6px 15px rgba(0, 180, 216, 0.4);
        }
        .btn-cta {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            background-color: #fb8500;
            color: white;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .btn-cta:hover {
            background-color: #e07a00;
            transform: scale(1.05);
        }
        .hero-section .btn-cta {
            background-color: #ffffff;
            color: #111827;
        }
         .hero-section .btn-cta:hover {
            background-color: #f0f0f0;
        }


        .section-title {
            font-family: 'Quicksand', 'Helvetica Neue', Arial, sans-serif;
            font-weight: 700;
            color: #023e8a;
            border-bottom: 3px solid #fb8500;
        }
        .subsection-title {
            font-family: 'Quicksand', 'Helvetica Neue', Arial, sans-serif;
            font-weight: 600;
            color: #0077b6;
            margin-bottom: 1.5rem;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
        }
        .hero-section h1, .hubverse-title, .section-title {
             font-family: 'Quicksand', 'Helvetica Neue', Arial, sans-serif;
        }


        .feature-card, .product-card, .document-card, .event-card, .post-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e0e0e0;
        }
        .feature-card:hover, .product-card:hover, .document-card:hover, .event-card:hover, .post-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        }
        .feature-card .icon-bg {
            width: 4rem; height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 1.75rem;
            transition: transform 0.3s ease;
        }
        .feature-card:hover .icon-bg {
            transform: rotate(15deg) scale(1.1);
        }
        .icon-bg-marketplace { background-color: #ffedd5; color: #f97316; }
        .icon-bg-library { background-color: #dcfce7; color: #22c55e; }
        .icon-bg-news { background-color: #fef9c3; color: #eab308; }
        .icon-bg-ai { background-color: #ede9fe; color: #8b5cf6; }
        .icon-bg-social { background-color: #ffe4e6; color: #f43f5e; }

        .footer {
            background-color: #003554;
            color: #ade8f4;
        }
        .footer a {
            color: #caf0f8;
            transition: color 0.3s ease;
        }
        .footer a:hover {
            color: #ffffff;
        }
        .footer .social-icon {
            transition: transform 0.3s ease;
        }
        .footer .social-icon:hover {
            transform: scale(1.2);
        }

        .product-card img { border-radius: 0.75rem 0.75rem 0 0; }
        .product-card .price { color: #d90429; font-weight: 700; }
        .btn-add-to-cart {
            background-color: #2a9d8f;
            color: white;
            transition: background-color 0.3s ease;
        }
        .btn-add-to-cart:hover { background-color: #21867a; }

        .library-main-specialization-tabs, .library-sub-specialization-tabs-container,
        .main-specialization-tabs, .sub-specialization-tabs-container {
            display: none; padding-top: 0.75rem; margin-top: 0.75rem;
        }
        .library-main-specialization-tabs.active, .library-sub-specialization-tabs-container.active,
        .main-specialization-tabs.active, .sub-specialization-tabs-container.active {
            display: flex; flex-wrap: wrap; gap: 0.5rem;
        }
        .library-main-specialization-tabs, .main-specialization-tabs { border-top: 1px solid #e5e7eb; }

        .library-sub-specialization-tabs-container { margin-left: 1rem; padding-left: 1rem; border-left: 2px solid #22d3ee; }
        .sub-specialization-tabs-container { margin-left: 1rem; padding-left: 1rem; border-left: 2px solid #fbbf24; }

        .library-sub-specialization-tabs, .sub-specialization-tabs { display: none; flex-wrap: wrap; gap: 0.5rem; }
        .library-sub-specialization-tabs.active, .sub-specialization-tabs.active { display: flex; }

        .library-category-tab-item, .library-sub-category-tab-item,
        .category-tab-item, .sub-category-tab-item {
            padding: 0.5rem 1rem;
            border-radius: 9999px; font-size: 0.875rem; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        .library-category-tab-item, .library-sub-category-tab-item {
             border: 1px solid #22d3ee; color: #0891b2; background-color: #cffafe;
        }
        .library-category-tab-item:hover, .library-category-tab-item.active-tab,
        .library-sub-category-tab-item:hover, .library-sub-category-tab-item.active-tab {
            background-color: #22d3ee; color: #0e7490; border-color: #06b6d4;
        }
        .library-sub-category-tab-item { border-color: #67e8f9; background-color: #ecfeff; }
        .library-sub-category-tab-item:hover, .library-sub-category-tab-item.active-tab {
            background-color: #67e8f9; color: #0e7490;
        }
        .category-tab-item, .sub-category-tab-item { /* For Marketplace */
            border: 1px solid #fbbf24; color: #b45309; background-color: #fef3c7;
        }
        .category-tab-item:hover, .category-tab-item.active-tab,
        .sub-category-tab-item:hover, .sub-category-tab-item.active-tab {
            background-color: #fbbf24; color: #78350f; border-color: #f59e0b;
        }
        .sub-category-tab-item {
             border-color: #fcd34d; background-color: #fffbeb;
        }
         .sub-category-tab-item:hover, .sub-category-tab-item.active-tab {
            background-color: #fcd34d; color: #92400e;
        }

        .document-card .btn-view-doc {
            background-color: #0096c7; color: white;
        }
        .document-card .btn-view-doc:hover { background-color: #0077b6; }

        .news-events-tabs-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .news-event-tab-button {
            padding: 0.625rem 1.25rem;
            font-weight: 500;
            color: #4b5563;
            background-color: #f3f4f6;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 1px solid transparent;
        }
        .news-event-tab-button:hover {
            background-color: #e5e7eb;
            color: #1f2937;
        }
        .news-event-tab-button.active-news-tab {
            background-color: #fbbf24;
            color: #78350f;
            font-weight: 600;
            border-color: #f59e0b;
        }
        .news-event-content-pane {
            display: none;
            padding-top: 1rem;
        }
        .news-event-content-pane.active {
            display: block;
        }
        .event-card .event-tag {
            font-size: 0.75rem; font-weight: 600;
            padding: 0.25rem 0.75rem; border-radius: 50px;
        }
        .tag-workshop { background-color: #e0e7ff; color: #4f46e5; }
        .tag-event { background-color: #fffbeb; color: #f59e0b; }
        .tag-volunteer { background-color: #f0fdf4; color: #16a34a; }
        .tag-humanitarian { background-color: #fee2e2; color: #dc2626; }
        .tag-academic { background-color: #f5f3ff; color: #7c3aed; }
        .tag-online { background-color: #fce7f3; color: #db2777; }

        .gemini-chat-container {
            background-color: #fff;
            border-radius: 1rem;
            box-shadow: 0 0 0 1px rgba(0,0,0,.1),0 2px 3px rgba(0,0,0,.1),0 4px 12px rgba(0,0,0,.1);
            padding: 1.5rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .gemini-chat-messages {
            height: 450px;
            overflow-y: auto;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .gemini-chat-bubble {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
            max-width: 90%;
        }
        .gemini-chat-bubble .avatar {
            width: 2.25rem;
            height: 2.25rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            flex-shrink: 0;
        }
        .gemini-chat-bubble .avatar-user {
            background-color: #cce7ff;
            color: #00529b;
        }
        .gemini-chat-bubble .avatar-ai {
            background-color: #d1fae5;
            color: #065f46;
        }
        .gemini-chat-bubble .message-content {
            background-color: #f3f4f6;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .gemini-chat-bubble.user .message-content {
            background-color: #e0f2fe;
            border-top-left-radius: 0.25rem;
        }
        .gemini-chat-bubble.ai .message-content {
            background-color: #f0fdf4;
            border-top-right-radius: 0.25rem;
        }
        .gemini-chat-bubble.user {
            margin-left: auto;
            flex-direction: row-reverse;
        }
         .gemini-chat-bubble.user .message-content {
            border-top-right-radius: 0.25rem;
            border-top-left-radius: 0.75rem;
        }

        .gemini-chat-input-area {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: #f9fafb;
            border-radius: 0.75rem;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        .gemini-chat-input {
            flex-grow: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        .gemini-chat-input:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
        }
        .gemini-send-button {
            background-color: #2563eb;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .gemini-send-button:hover {
            background-color: #1d4ed8;
        }

        .insta-post-card {
            background-color: #fff;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }
        .insta-post-header {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
        }
        .insta-post-header .avatar {
            width: 2.5rem; height: 2.5rem;
            border-radius: 50%;
            margin-right: 0.75rem;
            border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                                 linear-gradient(to right, #f9ce34, #ee2a7b, #6228d7) border-box;
        }
        .insta-post-header .username {
            font-weight: 600;
            color: #262626;
        }
        .insta-post-header .location {
            font-size: 0.75rem;
            color: #8e8e8e;
        }
        .insta-post-header .options-btn {
            margin-left: auto;
            color: #262626;
        }
        .insta-post-image {
            width: 100%;
            max-height: 600px;
            object-fit: cover;
            border-top: 1px solid #efefef;
            border-bottom: 1px solid #efefef;
        }
        .insta-post-actions {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
        }
        .insta-post-actions button {
            background: none; border: none; cursor: pointer;
            font-size: 1.5rem;
            color: #262626;
            margin-right: 1rem;
            transition: color 0.2s;
        }
        .insta-post-actions button.liked .fa-heart {
            color: #ed4956;
            font-weight: 900;
        }
        .insta-post-actions button:hover { color: #8e8e8e; }
        .insta-post-actions .save-btn { margin-left: auto; margin-right: 0; }
        .insta-post-actions .save-btn.saved .fa-bookmark {
            color: #f5c601;
            font-weight: 900;
        }
        .insta-post-likes {
            padding: 0 1rem;
            font-weight: 600;
            font-size: 0.875rem;
            color: #262626;
        }
        .insta-post-caption {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            color: #262626;
        }
        .insta-post-caption .username { font-weight: 600; margin-right: 0.25rem; }
        .insta-post-comments-link {
            padding: 0 1rem 0.5rem;
            font-size: 0.875rem;
            color: #8e8e8e;
            cursor: pointer;
        }
         .insta-post-comments-section {
            display: none;
            padding: 0.5rem 1rem;
            border-top: 1px solid #efefef;
        }
        .insta-post-comments-section.active {
            display: block;
        }
        .insta-post-add-comment {
            display: flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-top: 1px solid #efefef;
        }
        .insta-post-add-comment input {
            flex-grow: 1;
            border: none;
            padding: 0.5rem;
            font-size: 0.875rem;
        }
        .insta-post-add-comment input:focus { outline: none; }
        .insta-post-add-comment button {
            background: none; border: none;
            color: #0095f6; font-weight: 600;
            cursor: pointer;
        }
        .insta-sidebar-profile .avatar {
            width: 3.5rem; height: 3.5rem;
             border: 2px solid transparent;
            background: linear-gradient(white, white) padding-box,
                                 linear-gradient(to right, #f9ce34, #ee2a7b, #6228d7) border-box;
        }


        .line-clamp-3 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }

        .main-specialization-tabs {
            display: none;
            padding-top: 0.75rem;
            margin-top: 0.75rem;
            border-top: 1px solid #e5e7eb;
        }
        .main-specialization-tabs.active {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .category-tab-item {
            padding: 0.5rem 1rem; border: 1px solid #fbbf24;
            color: #b45309; background-color: #fef3c7;
            border-radius: 9999px; font-size: 0.875rem; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        .category-tab-item:hover, .category-tab-item.active-tab {
            background-color: #fbbf24; color: #78350f; border-color: #f59e0b;
        }

        .sub-specialization-tabs-container {
            display: none;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            margin-left: 1rem;
            padding-left: 1rem;
            border-left: 2px solid #fbbf24;
        }
        .sub-specialization-tabs-container.active {
             display: block;
        }
        .sub-specialization-tabs {
            display: none;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .sub-specialization-tabs.active {
            display: flex;
        }
        .sub-category-tab-item {
            padding: 0.5rem 1rem; border: 1px solid #fcd34d;
            color: #92400e;  background-color: #fffbeb;
            border-radius: 9999px; font-size: 0.875rem; font-weight: 500; cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }
        .sub-category-tab-item:hover, .sub-category-tab-item.active-tab {
            background-color: #fcd34d; color: #78350f; border-color: #fbbf24;
        }

        /* Modal Styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 500px;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
        }
        .modal-close-btn:hover {
            color: #1f2937;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .form-input:focus {
            outline: none;
            border-color: #0077b6;
            box-shadow: 0 0 0 2px rgba(0, 119, 182, 0.2);
        }
        .form-label {
            display: block;
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
        }
        .form-button {
            width: 100%;
            padding: 0.75rem;
            background-color: #00b4d8;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .form-button:hover {
            background-color: #0096c7;
        }

        /* Page simulation */
        .page-content-section {
            display: none; /* Hidden by default */
        }
        .page-content-section.active-page {
            display: block; /* Or flex/grid as needed */
        }
        #hero-section, #features-overview { /* Initially visible for home */
            display: block;
        }

        /* New styles for magic effect */
        .btn-cta.magic-effect {
            position: relative;
            overflow: hidden;
            z-index: 1; /* Ensure pseudo-element is behind content but above other elements */
        }

        .btn-cta.magic-effect::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            animation: magicLight 0.8s forwards; /* Animation duration */
            z-index: -1; /* Place behind button text */
        }

        @keyframes magicLight {
            0% {
                width: 0;
                height: 0;
                opacity: 0.8;
            }
            100% {
                width: 300%; /* Expand significantly */
                height: 300%;
                opacity: 0;
            }
        }

        /* Share Modal Specific Styles */
        .share-friend-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 0.5rem;
            margin-bottom: 1rem;
        }
        .share-friend-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 0.375rem;
            transition: background-color 0.2s ease;
        }
        .share-friend-item:hover {
            background-color: #f3f4f6;
        }
        .share-friend-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #db2777; /* Pink color for checkbox */
        }
        .share-friend-item .avatar {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            margin-right: 0.75rem;
            object-fit: cover;
        }
        .share-friend-item .username {
            font-weight: 500;
            color: #374151;
        }
    </style>
</head>
<body class="text-gray-700">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" class="text-4xl hubverse-title page-router-link" data-target-page="home">HUBverse</a>
            <nav class="hidden md:flex space-x-1 items-center">
                <a href="#" data-target-page="home" class="nav-link page-router-link active-nav-link">Tổng Quan</a>
                <a href="#" data-target-page="marketplace" class="nav-link page-router-link">Pass Tài Liệu</a>
                <a href="#" data-target-page="digital-library" class="nav-link page-router-link">Thư Viện Số</a>
                <a href="#" data-target-page="news-events" class="nav-link page-router-link">Tin Tức</a>
                <a href="#" data-target-page="ai-chatbot" class="nav-link page-router-link">AI Chat</a>
                <a href="#" data-target-page="social-networking" class="nav-link page-router-link">Kết Nối</a>
            </nav>
            <button id="open-login-modal" class="btn-login">Đăng Nhập</button>
            <button class="md:hidden text-gray-600 hover:text-indigo-600 focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
    </header>

    <main id="main-content-area">
        <section id="hero-section" class="hero-section text-white py-24 md:py-40 page-content-section">
            <div class="hero-content container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6">HUBverse</h1>
                <p class="text-lg md:text-2xl mb-10 max-w-2xl mx-auto leading-relaxed">Tắt lơ ngơ, bật HUBverse</p>
                <!-- Added id="explore-now-btn" and removed page-router-link class to handle click behavior separately -->
                <a href="#features-overview" id="explore-now-btn" class="btn-cta text-lg">Khám Phá Ngay <i class="fas fa-rocket ml-2"></i></a>
            </div>
            <canvas id="hero-3d-canvas"></canvas>
        </section>

        <section id="features-overview" class="py-16 md:py-24 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 section-title">Những Điều Tuyệt Vời Chờ Đón Bạn</h2>
                <p class="text-center text-gray-600 mb-12 md:mb-20 max-w-xl mx-auto text-lg">HUBverse không chỉ là một trang web, mà là người bạn đồng hành trên hành trình sinh viên.</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10">
                    <div class="feature-card p-8 text-center"><div class="icon-bg icon-bg-marketplace mx-auto"> <i class="fas fa-store"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-800">Chợ Sinh Viên HUB</h3><p class="text-gray-600 mb-4">Mua bán, trao đổi tài liệu, đồ dùng học tập dễ dàng, tiện lợi.</p><a href="#" data-target-page="marketplace" class="font-semibold text-orange-500 hover:text-orange-600 transition duration-300 page-router-link">Vào Chợ Ngay <i class="fas fa-arrow-right ml-1"></i></a></div>
                    <div class="feature-card p-8 text-center"><div class="icon-bg icon-bg-library mx-auto"> <i class="fas fa-book-open"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-800">Thư Viện Tri Thức</h3><p class="text-gray-600 mb-4">Kho tài liệu số phong phú, chính thống từ nhà trường và cộng đồng.</p><a href="#" data-target-page="digital-library" class="font-semibold text-green-500 hover:text-green-600 transition duration-300 page-router-link">Khám Phá Thư Viện <i class="fas fa-arrow-right ml-1"></i></a></div>
                    <div class="feature-card p-8 text-center"><div class="icon-bg icon-bg-news mx-auto"> <i class="fas fa-bullhorn"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-800">HUB News & Events</h3><p class="text-gray-600 mb-4">Không bỏ lỡ bất kỳ tin tức, sự kiện nóng hổi nào của trường.</p><a href="#" data-target-page="news-events" class="font-semibold text-yellow-500 hover:text-yellow-600 transition duration-300 page-router-link">Xem Tin Mới <i class="fas fa-arrow-right ml-1"></i></a></div>
                    <div class="feature-card p-8 text-center"><div class="icon-bg icon-bg-ai mx-auto"> <i class="fas fa-robot"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-800">Trợ Lý AI 24/7</h3><p class="text-gray-600 mb-4">Giải đáp mọi thắc mắc học tập, thủ tục nhanh chóng, mọi lúc mọi nơi.</p><a href="#" data-target-page="ai-chatbot" class="font-semibold text-purple-500 hover:text-purple-600 transition duration-300 page-router-link">Hỏi AI Ngay <i class="fas fa-arrow-right ml-1"></i></a></div>
                    <div class="feature-card p-8 text-center"><div class="icon-bg icon-bg-social mx-auto"> <i class="fas fa-users"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-800">HUB Connection</h3><p class="text-gray-600 mb-4">Kết nối bạn bè, chia sẻ khoảnh khắc, xây dựng cộng đồng HUBers.</p><a href="#" data-target-page="social-networking" class="font-semibold text-rose-500 hover:text-rose-600 transition duration-300 page-router-link">Tham Gia Cộng Đồng <i class="fas fa-arrow-right ml-1"></i></a></div>
                    <div class="feature-card p-8 text-center bg-gray-100 border-dashed border-gray-300"><div class="icon-bg bg-gray-200 text-gray-500 mx-auto"> <i class="fas fa-puzzle-piece"></i> </div><h3 class="text-2xl font-semibold mb-3 text-gray-700">Tính Năng Sắp Ra Mắt</h3><p class="text-gray-500 mb-4">Nhiều điều thú vị khác đang được HUBverse phát triển!</p><span class="font-semibold text-gray-400">Coming Soon...</span></div>
                </div>
            </div>
        </section>

        <section id="marketplace" class="py-16 md:py-24 bg-orange-50 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 section-title" style="border-color: #f97316;">Chợ Sinh Viên HUBverse</h2>
                <p class="text-center text-gray-600 mb-12 md:mb-16 max-w-xl mx-auto text-lg">Nơi "pass" đồ cũ, tìm "deal" hời cho mọi nhu cầu học tập và đời sống sinh viên.</p>
                <div class="mb-12 p-6 bg-white rounded-xl shadow-md">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start">
                        <div class="md:col-span-2"><label for="search-marketplace" class="block text-sm font-medium text-gray-700 mb-1">Tìm kiếm (sách, đồ dùng, mã môn,...)</label><input type="text" id="search-marketplace" placeholder="VD: Giáo trình Vi mô, tai nghe cũ..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500"></div>
                        <div><label for="filter-main-category" class="block text-sm font-medium text-gray-700 mb-1">Danh mục chính</label><select id="filter-main-category" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500"><option value="all" selected>Tất cả</option><option value="dai-cuong">Môn đại cương</option><option value="chuyen-nganh">Môn chuyên ngành</option><option value="do-dung">Đồ dùng</option></select></div>
                    </div>
                    <div id="main-specialization-tabs-container" class="main-specialization-tabs mt-4">
                        <button class="category-tab-item active-tab" data-main-spec="all-main-specs">Tất cả ngành</button>
                        <button class="category-tab-item" data-main-spec="tcnh" data-has-subs="true">Tài chính - Ngân hàng</button>
                        <button class="category-tab-item" data-main-spec="qtkd" data-has-subs="true">Quản trị kinh doanh</button>
                        <button class="category-tab-item" data-main-spec="ktqt" data-has-subs="true">Kinh tế quốc tế</button>
                        <button class="category-tab-item" data-main-spec="htttql" data-has-subs="true">Hệ thống Thông tin Quản lý</button>
                        <button class="category-tab-item" data-main-spec="luatkt" data-has-subs="true">Luật kinh tế</button>
                        <button class="category-tab-item" data-main-spec="nnanh" data-has-subs="true">Ngôn ngữ Anh</button>
                        <button class="category-tab-item" data-main-spec="ktkt" data-has-subs="true">Kế toán - Kiểm toán</button>
                    </div>
                    <div id="sub-specialization-tabs-container" class="sub-specialization-tabs-container mt-3">
                        <div id="subs-tcnh" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-tcnh-subs">Tất cả TCNH</button><button class="sub-category-tab-item" data-sub-spec="tai-chinh">Tài chính</button><button class="sub-category-tab-item" data-sub-spec="ngan-hang">Ngân hàng</button></div>
                        <div id="subs-qtkd" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-qtkd-subs">Tất cả QTKD</button><button class="sub-category-tab-item" data-sub-spec="quan-tri-kinh-doanh">Quản trị kinh doanh</button><button class="sub-category-tab-item" data-sub-spec="digital-marketing">Digital Marketing</button><button class="sub-category-tab-item" data-sub-spec="logistics">Logistics</button></div>
                        <div id="subs-ktqt" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-ktqt-subs">Tất cả KTQT</button><button class="sub-category-tab-item" data-sub-spec="kinh-te-quoc-te">Kinh tế quốc tế</button><button class="sub-category-tab-item" data-sub-spec="kinh-te-kd-so">Kinh tế - KD số</button></div>
                        <div id="subs-htttql" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-htttql-subs">Tất cả HTTTQL</button><button class="sub-category-tab-item" data-sub-spec="khoa-hoc-du-lieu">Khoa học dữ liệu</button><button class="sub-category-tab-item" data-sub-spec="thuong-mai-dien-tu">Thương mại điện tử</button></div>
                        <div id="subs-luatkt" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-luatkt-subs">Tất cả Luật KT</button><button class="sub-category-tab-item" data-sub-spec="luat-doanh-nghiep">Luật doanh nghiệp</button><button class="sub-category-tab-item" data-sub-spec="luat-ngan-hang">Luật ngân hàng</button></div>
                        <div id="subs-nnanh" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-nnanh-subs">Tất cả Ngôn ngữ Anh</button><button class="sub-category-tab-item" data-sub-spec="tieng-anh-thuong-mai">Tiếng Anh thương mại</button><button class="sub-category-tab-item" data-sub-spec="ngon-ngu-anh-trung">Ngôn ngữ Anh - Trung</button></div>
                        <div id="subs-ktkt" class="sub-specialization-tabs"><button class="sub-category-tab-item active-tab" data-sub-spec="all-ktkt-subs">Tất cả KT-KT</button><button class="sub-category-tab-item" data-sub-spec="ke-toan">Kế toán</button><button class="sub-category-tab-item" data-sub-spec="kiem-toan">Kiểm toán</button></div>
                    </div>
                    <div class="mt-6 flex justify-end"><button id="filter-results-button" class="bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 text-base"><i class="fas fa-filter mr-2"></i>Lọc Kết Quả</button></div>
                </div>
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <!-- Existing Products -->
                    <div class="product-card flex flex-col" data-category="dai-cuong"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Triết+Học" alt="Giáo trình Triết học Mác-Lênin" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Giáo trình Triết học Mác-Lênin</h3><p class="price text-xl mb-2">75.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Trần Văn Đức</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> Môn đại cương</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Sách còn mới, highlight vài chỗ quan trọng.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="chuyen-nganh" data-main-spec-tag="ktkt" data-sub-spec-tag="ke-toan"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Kế+Toán+TC" alt="Giáo trình Kế toán tài chính 1" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Kế toán Tài chính 1</h3><p class="price text-xl mb-2">110.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Lê Thị Hoa</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> KT-KT / Kế toán</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Sách gốc, có bài tập giải sẵn.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="do-dung"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Máy+Tính+Casio" alt="Máy tính Casio" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Máy tính Casio FX-580VN X</h3><p class="price text-xl mb-2">350.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Phạm Gia Huy</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> Đồ dùng</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Còn mới, full chức năng, hết bảo hành.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="chuyen-nganh" data-main-spec-tag="qtkd" data-sub-spec-tag="digital-marketing"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Digital+MKT" alt="Sách Digital Marketing" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Digital Marketing từ A-Z</h3><p class="price text-xl mb-2">190.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> CLB Marketing HUB</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> QTKD / Digital Marketing</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Cẩm nang toàn diện cho người mới bắt đầu.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="chuyen-nganh" data-main-spec-tag="htttql" data-sub-spec-tag="khoa-hoc-du-lieu"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Data+Science" alt="Sách Khoa học dữ liệu" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Python cho Khoa học Dữ liệu</h3><p class="price text-xl mb-2">250.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Nhóm SV Nghiên cứu</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> HTTTQL / Khoa học dữ liệu</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Thực hành với các thư viện phổ biến.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>

                    <!-- New Marketplace Products -->
                    <div class="product-card flex flex-col" data-category="dai-cuong"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Kinh+Tế+Vĩ+Mô" alt="Giáo trình Kinh tế vĩ mô" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Giáo trình Kinh tế vĩ mô</h3><p class="price text-xl mb-2">90.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Nguyễn Văn An</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> Môn đại cương</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Sách mới 99%, không highlight.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="chuyen-nganh" data-main-spec-tag="nnanh" data-sub-spec-tag="tieng-anh-thuong-mai"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Tiếng+Anh+TM" alt="Sách Tiếng Anh thương mại" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Tiếng Anh Thương Mại Quốc Tế</h3><p class="price text-xl mb-2">150.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Trương Thị Bích</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> Ngôn ngữ Anh / Tiếng Anh thương mại</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Sách có bài tập và CD nghe.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="do-dung"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Bút+Chì+Màu" alt="Bộ bút chì màu" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Bộ bút chì màu Faber-Castell 36 màu</h3><p class="price text-xl mb-2">120.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Lê Minh Thư</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> Đồ dùng</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Mới dùng vài lần, màu sắc đẹp.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                    <div class="product-card flex flex-col" data-category="chuyen-nganh" data-main-spec-tag="tcnh" data-sub-spec-tag="tai-chinh"><img src="https://placehold.co/400x300/FFEDD5/F97316?text=Tài+Chính+DN" alt="Sách Tài chính doanh nghiệp" class="w-full h-52 object-cover" onerror="this.src='https://placehold.co/400x300/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-5 flex flex-col flex-grow"><h3 class="text-lg font-semibold mb-2 text-gray-800">Giáo trình Tài chính doanh nghiệp</h3><p class="price text-xl mb-2">130.000 VNĐ</p><p class="text-xs text-gray-500 mb-1"><i class="fas fa-user-circle mr-1"></i> Nguyễn Hoàng Nam</p><p class="text-xs text-gray-500 mb-3"><i class="fas fa-tag mr-1"></i> TCNH / Tài chính</p><p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Phiên bản mới nhất, có bài tập thực hành.</p><button class="mt-auto w-full btn-add-to-cart font-semibold py-2.5 px-4 rounded-lg text-sm"><i class="fas fa-cart-plus mr-2"></i>Thêm vào giỏ</button></div></div>
                </div>
                <div class="mt-16 flex justify-center"><a href="#" class="btn-cta bg-orange-500 hover:bg-orange-600 text-base">Xem Thêm Sản Phẩm <i class="fas fa-chevron-down ml-2"></i></a></div>
            </div>
        </section>

        <section id="digital-library" class="py-16 md:py-24 bg-sky-50 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 section-title" style="border-color: #0ea5e9;">Thư Viện Tri Thức HUB</h2>
                <p class="text-center text-gray-600 mb-12 md:mb-16 max-w-xl mx-auto text-lg">Nguồn tài liệu học thuật vô tận, từ bài giảng, sách chuyên khảo đến nghiên cứu khoa học mới nhất.</p>

                <div class="mb-12 p-6 bg-white rounded-xl shadow-md">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start">
                        <div class="md:col-span-2">
                            <label for="search-library" class="block text-sm font-medium text-gray-700 mb-1">Tìm kiếm tài liệu (tên, tác giả, từ khóa,...)</label>
                            <input type="text" id="search-library" placeholder="VD: Kinh tế vĩ mô, Bài giảng thầy X..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <label for="filter-main-category-library" class="block text-sm font-medium text-gray-700 mb-1">Danh mục chính</label>
                            <select id="filter-main-category-library" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500">
                                <option value="all" selected>Tất cả tài liệu</option>
                                <option value="dai-cuong">Môn đại cương</option>
                                <option value="chuyen-nganh">Môn chuyên ngành</option>
                                <option value="mo-rong">Tài liệu mở rộng khác</option>
                            </select>
                        </div>
                    </div>

                    <div id="library-main-specialization-tabs-container" class="library-main-specialization-tabs mt-4">
                        <button class="library-category-tab-item active-tab" data-main-spec="all-main-specs">Tất cả ngành</button>
                        <button class="library-category-tab-item" data-main-spec="tcnh" data-has-subs="true">Tài chính - Ngân hàng</button>
                        <button class="library-category-tab-item" data-main-spec="qtkd" data-has-subs="true">Quản trị kinh doanh</button>
                        <button class="library-category-tab-item" data-main-spec="ktqt" data-has-subs="true">Kinh tế quốc tế</button>
                        <button class="library-category-tab-item" data-main-spec="htttql" data-has-subs="true">Hệ thống Thông tin Quản lý</button>
                        <button class="library-category-tab-item" data-main-spec="luatkt" data-has-subs="true">Luật kinh tế</button>
                        <button class="library-category-tab-item" data-main-spec="nnanh" data-has-subs="true">Ngôn ngữ Anh</button>
                        <button class="library-category-tab-item" data-main-spec="ktkt" data-has-subs="true">Kế toán - Kiểm toán</button>
                    </div>

                    <div id="library-sub-specialization-tabs-container" class="library-sub-specialization-tabs-container mt-3">
                        <div id="library-subs-tcnh" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-tcnh-subs">Tất cả TCNH</button><button class="library-sub-category-tab-item" data-sub-spec="tai-chinh">Tài chính</button><button class="library-sub-category-tab-item" data-sub-spec="ngan-hang">Ngân hàng</button></div>
                        <div id="library-subs-qtkd" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-qtkd-subs">Tất cả QTKD</button><button class="library-sub-category-tab-item" data-sub-spec="quan-tri-kinh-doanh">Quản trị kinh doanh</button><button class="library-sub-category-tab-item" data-sub-spec="digital-marketing">Digital Marketing</button><button class="library-sub-category-tab-item" data-sub-spec="logistics">Logistics</button></div>
                        <div id="library-subs-ktqt" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-ktqt-subs">Tất cả KTQT</button><button class="library-sub-category-tab-item" data-sub-spec="kinh-te-quoc-te">Kinh tế quốc tế</button><button class="library-sub-category-tab-item" data-sub-spec="kinh-te-kd-so">Kinh tế - KD số</button></div>
                        <div id="library-subs-htttql" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-htttql-subs">Tất cả HTTTQL</button><button class="library-sub-category-tab-item" data-sub-spec="khoa-hoc-du-lieu">Khoa học dữ liệu</button><button class="library-sub-category-tab-item" data-sub-spec="thuong-mai-dien-tu">Thương mại điện tử</button></div>
                        <div id="library-subs-luatkt" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-luatkt-subs">Tất cả Luật KT</button><button class="library-sub-category-tab-item" data-sub-spec="luat-doanh-nghiep">Luật doanh nghiệp</button><button class="library-sub-category-tab-item" data-sub-spec="luat-ngan-hang">Luật ngân hàng</button></div>
                        <div id="library-subs-nnanh" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-nnanh-subs">Tất cả Ngôn ngữ Anh</button><button class="library-sub-category-tab-item" data-sub-spec="tieng-anh-thuong-mai">Tiếng Anh thương mại</button><button class="library-sub-category-tab-item" data-sub-spec="ngon-ngu-anh-trung">Ngôn ngữ Anh - Trung</button></div>
                        <div id="library-subs-ktkt" class="library-sub-specialization-tabs"><button class="library-sub-category-tab-item active-tab" data-sub-spec="all-ktkt-subs">Tất cả KT-KT</button><button class="library-sub-category-tab-item" data-sub-spec="ke-toan">Kế toán</button><button class="library-sub-category-tab-item" data-sub-spec="kiem-toan">Kiểm toán</button></div>
                    </div>
                    <div class="mt-6 flex justify-end"><button id="filter-results-button-library" class="bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 text-base"><i class="fas fa-filter mr-2"></i>Lọc Tài Liệu</button></div>
                </div>

                <div id="document-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <!-- Existing Documents -->
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="chuyen-nganh" data-main-spec-tag="ktkt" data-sub-spec-tag="ke-toan"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=PDF" alt="Bài giảng PDF" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Bài giảng Kế toán Ngân hàng</h3><p class="text-xs text-gray-500 mb-1">Khoa Kế toán - Kiểm toán</p><p class="text-xs text-gray-500 mb-3"><span class="bg-sky-100 text-sky-700 py-0.5 px-2 rounded-full">PDF</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm"><i class="fas fa-eye mr-2"></i>Xem / Tải</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="mo-rong"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Ebook" alt="Ebook NCKH" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Tuyển tập NCKH Sinh viên 2025</h3><p class="text-xs text-gray-500 mb-1">Phòng QL Khoa học</p><p class="text-xs text-gray-500 mb-3"><span class="bg-sky-100 text-sky-700 py-0.5 px-2 rounded-full">Ebook</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm"><i class="fas fa-book-reader mr-2"></i>Đọc Ngay</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="chuyen-nganh" data-main-spec-tag="tcnh" data-sub-spec-tag="tai-chinh"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Video" alt="Video bài giảng" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Video: Phân tích Thị trường</h3><p class="text-xs text-gray-500 mb-1">Khoa Tài chính</p><p class="text-xs text-gray-500 mb-3"><span class="bg-red-100 text-red-700 py-0.5 px-2 rounded-full">Video</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm bg-red-500 hover:bg-red-600"><i class="fas fa-play-circle mr-2"></i>Xem Video</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="dai-cuong"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Quy+Chế" alt="Quy chế học vụ" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Quy chế học vụ (Mới nhất)</h3><p class="text-xs text-gray-500 mb-1">Phòng Đào tạo</p><p class="text-xs text-gray-500 mb-3"><span class="bg-gray-200 text-gray-700 py-0.5 px-2 rounded-full">Văn bản</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm"><i class="fas fa-file-alt mr-2"></i>Xem Chi Tiết</a></div>

                    <!-- New Digital Library Documents -->
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="dai-cuong"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=PPT" alt="Bài giảng Marketing căn bản" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Bài tập lớn Marketing căn bản</h3><p class="text-xs text-gray-500 mb-1">Khoa QTKD</p><p class="text-xs text-gray-500 mb-3"><span class="bg-purple-100 text-purple-700 py-0.5 px-2 rounded-full">PPT</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm bg-purple-500 hover:bg-purple-600"><i class="fas fa-file-powerpoint mr-2"></i>Xem Slide</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="chuyen-nganh" data-main-spec-tag="luatkt" data-sub-spec-tag="luat-doanh-nghiep"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Luận+Văn" alt="Luận văn tốt nghiệp" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Luận văn: Pháp lý trong Startup</h3><p class="text-xs text-gray-500 mb-1">Khoa Luật Kinh tế</p><p class="text-xs text-gray-500 mb-3"><span class="bg-yellow-100 text-yellow-700 py-0.5 px-2 rounded-full">Luận văn</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm bg-yellow-500 hover:bg-yellow-600"><i class="fas fa-scroll mr-2"></i>Đọc Luận Văn</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="mo-rong"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Video" alt="Video hướng dẫn phần mềm" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Video: Hướng dẫn sử dụng SAP</h3><p class="text-xs text-gray-500 mb-1">CLB Kế toán trẻ</p><p class="text-xs text-gray-500 mb-3"><span class="bg-red-100 text-red-700 py-0.5 px-2 rounded-full">Video</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm bg-red-500 hover:bg-red-600"><i class="fas fa-play-circle mr-2"></i>Xem Video</a></div>
                    <div class="document-card p-6 text-center hover:shadow-sky-200/50" data-category="mo-rong"><img src="https://placehold.co/150x200/E0F2FE/0EA5E9?text=Ebook" alt="Ebook Kỹ năng mềm" class="w-24 h-32 object-contain rounded-lg mb-4 mx-auto" onerror="this.src='https://placehold.co/150x200/E2E8F0/2D3748?text=Ảnh+Lỗi';"><h3 class="text-lg font-semibold mb-2 text-gray-800">Ebook: Kỹ năng mềm cho sinh viên 4.0</h3><p class="text-xs text-gray-500 mb-1">Trung tâm Hỗ trợ SV</p><p class="text-xs text-gray-500 mb-3"><span class="bg-sky-100 text-sky-700 py-0.5 px-2 rounded-full">Ebook</span></p><a href="#" class="w-full block btn-view-doc font-semibold py-2 px-4 rounded-lg text-sm"><i class="fas fa-book-reader mr-2"></i>Đọc Ngay</a></div>
                </div>
                   <div class="mt-16 flex justify-center"><a href="#" class="btn-cta bg-sky-500 hover:bg-sky-600 text-base">Khám Phá Thêm Tài Liệu <i class="fas fa-search-plus ml-2"></i></a></div>
            </div>
        </section>

        <section id="news-events" class="py-16 md:py-24 bg-yellow-50 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 md:mb-16 section-title" style="border-color: #f59e0b;">HUB News & Events Feed</h2>

                <div id="news-events-tabs-menu" class="news-events-tabs-menu">
                    <button class="news-event-tab-button active-news-tab" data-target="available-activities-content"><i class="fas fa-calendar-check mr-2"></i>Hoạt Động Đang Diễn Ra</button>
                    <button class="news-event-tab-button" data-target="volunteer-activities-content"><i class="fas fa-hands-helping mr-2"></i>Hoạt Động Tình Nguyện</button>
                    <button class="news-event-tab-button" data-target="academic-competitions-content"><i class="fas fa-trophy mr-2"></i>Cuộc Thi Học Thuật</button>
                    <button class="news-event-tab-button" data-target="minigames-content"><i class="fas fa-gamepad mr-2"></i>Minigames & ĐRL</button>
                </div>

                <div id="available-activities-content" class="news-event-content-pane active">
                    <h3 class="text-2xl md:text-3xl font-semibold mb-8 subsection-title text-sky-600">Hoạt Động Đang Diễn Ra</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="event-card hover:shadow-amber-200/50"><img src="https://placehold.co/400x220/FEF3C7/D97706?text=Workshop" alt="Workshop Kỹ năng" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-workshop mb-2 inline-block">Workshop</span><h4 class="text-xl font-semibold mb-2 text-gray-800">Kỹ Năng Phỏng Vấn Chinh Phục Nhà Tuyển Dụng</h4><p class="text-gray-600 text-sm mb-3"><i class="fas fa-clock mr-1"></i> 09:00, 15/07 - Hội trường A1</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Rèn luyện kỹ năng phỏng vấn với chuyên gia nhân sự, tự tin ứng tuyển mọi vị trí.</p><a href="#" class="font-semibold text-amber-600 hover:text-amber-700">Đăng ký <i class="fas fa-arrow-right ml-1"></i></a></div></div>
                        <div class="event-card hover:shadow-amber-200/50"><img src="https://placehold.co/400x220/FEF3C7/D97706?text=Job+Fair" alt="Ngày hội việc làm" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-event mb-2 inline-block">Sự kiện lớn</span><h4 class="text-xl font-semibold mb-2 text-gray-800">Ngày Hội Việc Làm HUB Connect 2025</h4><p class="text-gray-600 text-sm mb-3"><i class="fas fa-calendar-day mr-1"></i> Cả ngày, 20/07 - Sân vận động trường</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Hàng ngàn cơ hội việc làm từ các doanh nghiệp hàng đầu. Đừng bỏ lỡ!</p><a href="#" class="font-semibold text-amber-600 hover:text-amber-700">Xem chi tiết <i class="fas fa-arrow-right ml-1"></i></a></div></div>
                    </div>
                </div>
                <div id="volunteer-activities-content" class="news-event-content-pane">
                    <h3 class="text-2xl md:text-3xl font-semibold mb-8 subsection-title text-emerald-600">Hoạt Động Tình Nguyện</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="event-card hover:shadow-green-200/50"><img src="https://placehold.co/400x220/D1FAE5/059669?text=Mùa+Hè+Xanh" alt="Mùa hè xanh" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-volunteer mb-2 inline-block">Tình nguyện</span><h4 class="text-xl font-semibold mb-2 text-gray-800">Chiến dịch Mùa Hè Xanh 2025</h4><p class="text-gray-600 text-sm mb-3"><i class="fas fa-users mr-1"></i> Đoàn Thanh niên - Hội Sinh viên</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Chung tay xây dựng cộng đồng, mang lại giá trị cho xã hội.</p><a href="#" class="font-semibold text-green-600 hover:text-green-700">Tìm hiểu thêm <i class="fas fa-arrow-right ml-1"></i></a></div></div>
                        <div class="event-card hover:shadow-red-200/50"><img src="https://placehold.co/400x220/FEE2E2/B91C1C?text=Hiến+Máu" alt="Hiến máu nhân đạo" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-humanitarian mb-2 inline-block">Nhân đạo</span><h4 class="text-xl font-semibold mb-2 text-gray-800">Ngày hội Hiến Máu Nhân Đạo</h4><p class="text-gray-600 text-sm mb-3"><i class="fas fa-heartbeat mr-1"></i> CLB Sức Khỏe Cộng Đồng</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Mỗi giọt máu cho đi, một cuộc đời ở lại. Hãy tham gia!</p><a href="#" class="font-semibold text-red-600 hover:text-red-700">Đăng ký hiến máu <i class="fas fa-arrow-right ml-1"></i></a></div></div>
                    </div>
                </div>
                <div id="academic-competitions-content" class="news-event-content-pane">
                    <h3 class="text-2xl md:text-3xl font-semibold mb-8 subsection-title text-violet-600">Cuộc Thi Học Thuật</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="event-card hover:shadow-purple-200/50"><img src="https://placehold.co/400x220/F3E8FF/8B5CF6?text=Olympic" alt="Olympic Kinh tế" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-academic mb-2 inline-block">Học thuật</span><h4 class="text-xl font-semibold mb-2">Olympic Kinh Tế Học HUB Lần V</h4><p class="text-gray-600 text-sm mb-3"><i class="fas fa-university mr-1"></i> Khoa Kinh tế & CLB Học thuật</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Sân chơi trí tuệ đỉnh cao, khẳng định tài năng kinh tế của bạn.</p><a href="#" class="font-semibold text-purple-600 hover:text-purple-700">Thể lệ & Đăng ký <i class="fas fa-arrow-right ml-1"></i></a></div></div>
                    </div>
                </div>
                <div id="minigames-content" class="news-event-content-pane">
                    <h3 class="text-2xl md:text-3xl font-semibold mb-8 subsection-title text-pink-600">Minigames & Điểm Rèn Luyện</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="event-card hover:shadow-pink-200/50"><img src="https://placehold.co/400x220/FCE7F3/DB2777?text=Minigame" alt="Minigame Facebook" class="w-full h-48 object-cover rounded-t-xl" onerror="this.src='https://placehold.co/400x220/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div class="p-6"><span class="event-tag tag-online mb-2 inline-block">Online</span><h4 class="text-xl font-semibold mb-2">Minigame "HUBer Thông Thái" - Rinh Quà Khủng</h4><p class="text-gray-600 text-sm mb-3"><i class="fab fa-facebook-square mr-1"></i> Fanpage HUBverse & Đoàn Trường</p><p class="text-gray-700 text-sm mb-4 line-clamp-3">Tham gia minigame hàng tuần, giải trí và nhận điểm rèn luyện cực chất.</p><a href="#" class="font-semibold text-pink-600 hover:text-pink-700">Chơi Ngay! <i class="fas fa-gamepad ml-1"></i></a></div></div>
                    </div>
                </div>
                <div class="mt-16 flex justify-center">
                    <a href="#" class="btn-cta bg-yellow-500 hover:bg-yellow-600 text-base">Xem Tất Cả Tin Tức & Sự Kiện <i class="fas fa-newspaper ml-2"></i></a>
                </div>
            </div>
        </section>

        <section id="ai-chatbot" class="py-16 md:py-24 bg-gray-100 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 section-title" style="border-color: #4f46e5;">Trò Chuyện Cùng HUB AI</h2>
                <p class="text-center text-gray-600 mb-12 md:mb-16 max-w-xl mx-auto text-lg">Trợ lý ảo thông minh, sẵn sàng giải đáp mọi thắc mắc của bạn 24/7.</p>
                <div class="gemini-chat-container">
                    <div id="gemini-chat-messages" class="gemini-chat-messages">
                        <div class="gemini-chat-bubble ai"><div class="avatar avatar-ai"><i class="fas fa-brain"></i></div><div class="message-content"><p>Xin chào! Mình là HUB AI, người bạn đồng hành học tập của bạn. Bạn cần hỗ trợ gì hôm nay?</p></div></div>
                        <div class="gemini-chat-bubble user"><div class="message-content"><p>Chào HUB AI, cho mình hỏi về thủ tục đăng ký học phần hè được không?</p></div><div class="avatar avatar-user">SV</div></div>
                        <div class="gemini-chat-bubble ai"><div class="avatar avatar-ai"><i class="fas fa-brain"></i></div><div class="message-content"><p>Chào bạn! Thông tin về đăng ký học phần hè thường được cập nhật trên cổng thông tin sinh viên khoảng 2 tuần trước khi mở đăng ký. Bạn hãy theo dõi thông báo từ Phòng Đào tạo nhé. Mình có thể giúp gì khác cho bạn không?</p></div></div>
                    </div>
                    <div class="gemini-chat-input-area">
                        <input type="text" id="gemini-chat-input" placeholder="Nhắn tin cho HUB AI..." class="gemini-chat-input">
                        <button id="gemini-send-button" class="gemini-send-button"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <section id="social-networking" class="py-16 md:py-24 bg-pink-50 page-content-section">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4 section-title social-section-title">HUB Connection - Khoảnh Khắc HUBers</h2>
                <p class="text-center text-gray-600 mb-12 md:mb-16 max-w-xl mx-auto text-lg">Nơi chia sẻ, kết nối và lan tỏa những điều tuyệt vời của đời sống sinh viên HUB.</p>
                <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
                    <div class="md:col-span-8 space-y-6">
                        <div class="bg-white p-4 rounded-lg shadow border border-gray-200"><div class="flex items-center"><img src="https://placehold.co/40x40/FFE4E6/DC2626?text=Me" alt="User Avatar" class="w-10 h-10 rounded-full mr-3" onerror="this.src='https://placehold.co/40x40/E2E8F0/2D3748?text=Ảnh+Lỗi';"><input type="text" placeholder="Bạn đang nghĩ gì, [Tên sinh viên]?" class="w-full p-2 border border-gray-300 rounded-full focus:ring-pink-500 focus:border-pink-500 text-sm bg-gray-50"></div><div class="flex justify-end mt-3 pt-3 border-t border-gray-200"><button class="text-pink-600 hover:bg-pink-100 py-2 px-3 rounded-md text-sm mr-2"><i class="fas fa-image mr-1"></i> Ảnh/Video</button><button class="bg-pink-500 hover:bg-pink-600 text-white font-semibold py-2 px-4 rounded-md text-sm">Đăng</button></div></div>

                        <!-- Existing Posts -->
                        <article class="insta-post-card">
                            <header class="insta-post-header">
                                <img src="https://placehold.co/40x40/FBCFE8/9D174D?text=Linh" alt="Linh Avatar" class="avatar" onerror="this.src='https://placehold.co/40x40/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                                <div><a href="#" class="username">linh.hoai_hub</a><div class="location">Trường Đại học Ngân hàng TP.HCM</div></div>
                                <button class="options-btn"><i class="fas fa-ellipsis-h"></i></button>
                            </header>
                            <img src="https://placehold.co/600x750/FCE7F3/DB2777?text=Team+Building" alt="Ảnh hoạt động team building" class="insta-post-image" onerror="this.src='https://placehold.co/600x750/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                            <section class="insta-post-actions">
                                <button class="like-btn"><i class="far fa-heart"></i></button>
                                <button class="comment-btn"><i class="far fa-comment"></i></button>
                                <button class="share-btn"><i class="far fa-paper-plane"></i></button>
                                <button class="save-btn"><i class="far fa-bookmark"></i></button>
                            </section>
                            <section class="insta-post-likes"><span class="like-count">1234</span> lượt thích</section>
                            <section class="insta-post-caption"><a href="#" class="username">linh.hoai_hub</a><span>Chuyến đi team building cuối tuần thật ý nghĩa! ❤️ Nạp đầy năng lượng cho kỳ học mới. #HUB #TeamBuilding #SinhVienHUB</span></section>
                            <a href="#" class="insta-post-comments-link comment-btn">Xem tất cả 56 bình luận</a>
                            <section class="insta-post-comments-section">
                                <p class="text-xs text-gray-500 p-2">Khu vực bình luận sẽ hiện ở đây...</p>
                            </section>
                            <section class="insta-post-add-comment"><input type="text" placeholder="Thêm bình luận..."><button>Đăng</button></section>
                        </article>
                           <article class="insta-post-card">
                            <header class="insta-post-header">
                                <img src="https://placehold.co/40x40/DDD6FE/5B21B6?text=Minh" alt="Minh Avatar" class="avatar" onerror="this.src='https://placehold.co/40x40/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                                <div><a href="#" class="username">minh.anh_finance</a><div class="location">Thư viện HUB</div></div>
                                <button class="options-btn"><i class="fas fa-ellipsis-h"></i></button>
                            </header>
                            <img src="https://placehold.co/600x600/EDE9FE/7C3AED?text=Học+Bài+Deadline" alt="Ảnh học bài trên thư viện" class="insta-post-image" onerror="this.src='https://placehold.co/600x600/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                            <section class="insta-post-actions">
                                <button class="like-btn"><i class="far fa-heart"></i></button>
                                <button class="comment-btn"><i class="far fa-comment"></i></button>
                                <button class="share-btn"><i class="far fa-paper-plane"></i></button>
                                <button class="save-btn"><i class="far fa-bookmark"></i></button>
                            </section>
                            <section class="insta-post-likes"><span class="like-count">88</span> lượt thích</section>
                            <section class="insta-post-caption"><a href="#" class="username">minh.anh_finance</a><span>Chạy deadline cuối kỳ tại thư viện. Ai giống mình không? 😅 #HUBDeadline #StudyHard</span></section>
                            <a href="#" class="insta-post-comments-link comment-btn">Xem tất cả 12 bình luận</a>
                            <section class="insta-post-comments-section">
                                 <p class="text-xs text-gray-500 p-2">Khu vực bình luận sẽ hiện ở đây...</p>
                            </section>
                             <section class="insta-post-add-comment"><input type="text" placeholder="Thêm bình luận..."><button>Đăng</button></section>
                        </article>

                        <!-- New Social Posts -->
                        <article class="insta-post-card">
                            <header class="insta-post-header">
                                <img src="https://placehold.co/40x40/D1FAE5/065F46?text=Huy" alt="Huy Avatar" class="avatar" onerror="this.src='https://placehold.co/40x40/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                                <div><a href="#" class="username">huy.cntt_k26</a><div class="location">Phòng máy tính HUB</div></div>
                                <button class="options-btn"><i class="fas fa-ellipsis-h"></i></button>
                            </header>
                            <img src="https://placehold.co/600x600/D1FAE5/065F46?text=Code+Chay+Deadline" alt="Ảnh code chạy deadline" class="insta-post-image" onerror="this.src='https://placehold.co/600x600/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                            <section class="insta-post-actions">
                                <button class="like-btn"><i class="far fa-heart"></i></button>
                                <button class="comment-btn"><i class="far fa-comment"></i></button>
                                <button class="share-btn"><i class="far fa-paper-plane"></i></button>
                                <button class="save-btn"><i class="far fa-bookmark"></i></button>
                            </section>
                            <section class="insta-post-likes"><span class="like-count">205</span> lượt thích</section>
                            <section class="insta-post-caption"><a href="#" class="username">huy.cntt_k26</a><span>Đêm nay lại thức trắng với code rồi. Ai còn thức không? 💻 #DeveloperLife #HUBIT</span></section>
                            <a href="#" class="insta-post-comments-link comment-btn">Xem tất cả 25 bình luận</a>
                            <section class="insta-post-comments-section">
                                <p class="text-xs text-gray-500 p-2">Khu vực bình luận sẽ hiện ở đây...</p>
                            </section>
                            <section class="insta-post-add-comment"><input type="text" placeholder="Thêm bình luận..."><button>Đăng</button></section>
                        </article>

                        <article class="insta-post-card">
                            <header class="insta-post-header">
                                <img src="https://placehold.co/40x40/E0E7FF/4F46E5?text=Mai" alt="Mai Avatar" class="avatar" onerror="this.src='https://placehold.co/40x40/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                                <div><a href="#" class="username">mai.ktqt_hub</a><div class="location">HUB Campus</div></div>
                                <button class="options-btn"><i class="fas fa-ellipsis-h"></i></button>
                            </header>
                            <img src="https://placehold.co/600x600/E0E7FF/4F46E5?text=Sân+Trường" alt="Ảnh sân trường HUB" class="insta-post-image" onerror="this.src='https://placehold.co/600x600/E2E8F0/2D3748?text=Ảnh+Lỗi';">
                            <section class="insta-post-actions">
                                <button class="like-btn"><i class="far fa-heart"></i></button>
                                <button class="comment-btn"><i class="far fa-comment"></i></button>
                                <button class="share-btn"><i class="far fa-paper-plane"></i></button>
                                <button class="save-btn"><i class="far fa-bookmark"></i></button>
                            </section>
                            <section class="insta-post-likes"><span class="like-count">310</span> lượt thích</section>
                            <section class="insta-post-caption"><a href="#" class="username">mai.ktqt_hub</a><span>Buổi chiều yên bình ở sân trường. Yêu HUB! 💙 #HUBUniversity #StudentLife</span></section>
                            <a href="#" class="insta-post-comments-link comment-btn">Xem tất cả 40 bình luận</a>
                            <section class="insta-post-comments-section">
                                <p class="text-xs text-gray-500 p-2">Khu vực bình luận sẽ hiện ở đây...</p>
                            </section>
                            <section class="insta-post-add-comment"><input type="text" placeholder="Thêm bình luận..."><button>Đăng</button></section>
                        </article>

                    </div>
                    <aside class="md:col-span-4 space-y-6">
                        <div class="bg-white p-5 rounded-lg shadow border border-gray-200 insta-sidebar-profile"><div class="flex items-center mb-4"><img src="https://placehold.co/56x56/FFE4E6/DC2626?text=Me" alt="Your Avatar" class="avatar rounded-full mr-4" onerror="this.src='https://placehold.co/56x56/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div><p class="font-semibold text-base text-gray-800">[Tên Của Bạn]</p><p class="text-sm text-gray-500">@usernamecuaban</p></div></div><div class="flex justify-around text-center text-sm text-gray-600 mb-4"><div><span class="font-bold block text-gray-800 text-base">150</span><span class="text-xs">bài viết</span></div><div><span class="font-bold block text-gray-800 text-base">500</span><span class="text-xs">bạn bè</span></div><div><span class="font-bold block text-gray-800 text-base">230</span><span class="text-xs">theo dõi</span></div></div><button class="w-full bg-pink-500 hover:bg-pink-600 text-white font-semibold py-2 px-4 rounded-md transition duration-300 text-sm">Xem trang cá nhân</button></div>
                        <div class="bg-white p-5 rounded-lg shadow border border-gray-200">
                            <div class="flex justify-between items-center mb-3">
                                <h4 class="text-sm font-semibold text-gray-500">Gợi ý cho bạn</h4>
                                <a href="#" class="text-xs font-semibold text-gray-800">Xem tất cả</a>
                            </div>
                            <div class="space-y-3" id="suggested-friends-list">
                                <!-- Existing Suggested Friends -->
                                <div class="flex items-center justify-between"><div class="flex items-center"><img src="https://placehold.co/32x32/CCFBF1/14B8A6?text=Nam" alt="Nam Avatar" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://placehold.co/32x32/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div><p class="font-semibold text-gray-800 text-sm">quoc.nam_hub</p><p class="text-xs text-gray-400">Gợi ý cho bạn</p></div></div><button class="text-xs text-blue-500 font-semibold">Theo dõi</button></div>
                                <div class="flex items-center justify-between"><div class="flex items-center"><img src="https://placehold.co/32x32/E0F2FE/38BDF8?text=Vy" alt="Vy Avatar" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://placehold.co/32x32/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div><p class="font-semibold text-gray-800 text-sm">khanhvy.k25</p><p class="text-xs text-gray-400">Gợi ý cho bạn</p></div></div><button class="text-xs text-blue-500 font-semibold">Theo dõi</button></div>
                                <!-- New Suggested Friends -->
                                <div class="flex items-center justify-between"><div class="flex items-center"><img src="https://placehold.co/32x32/FFD1DC/FF69B4?text=An" alt="An Avatar" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://placehold.co/32x32/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div><p class="font-semibold text-gray-800 text-sm">an.cntt_hub</p><p class="text-xs text-gray-400">Gợi ý cho bạn</p></div></div><button class="text-xs text-blue-500 font-semibold">Theo dõi</button></div>
                                <div class="flex items-center justify-between"><div class="flex items-center"><img src="https://placehold.co/32x32/D4EDDA/28A745?text=Binh" alt="Binh Avatar" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://placehold.co/32x32/E2E8F0/2D3748?text=Ảnh+Lỗi';"><div><p class="font-semibold text-gray-800 text-sm">binh.finance</p><p class="text-xs text-gray-400">Gợi ý cho bạn</p></div></div><button class="text-xs text-blue-500 font-semibold">Theo dõi</button></div>
                            </div>
                        </div>
                           <p class="text-xs text-gray-400 text-center mt-4">&copy; <span id="socialCurrentYear">2025</span> HUBVERSE INSTA-LIKE</p>
                    </aside>
                </div>
            </div>
        </section>
    </main>

    <section id="cta-section" class="py-20 md:py-32 bg-gradient-to-r from-cyan-500 to-blue-500 text-white">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">Sẵn Sàng Gia Nhập Cộng Đồng HUBverse?</h2>
            <p class="text-lg md:text-xl mb-10 max-w-xl mx-auto">Đăng ký miễn phí ngay hôm nay để trải nghiệm tất cả tiện ích tuyệt vời!</p>
            <button id="open-register-modal" class="btn-cta bg-white text-blue-600 hover:bg-gray-100 text-lg">Đăng Ký Ngay <i class="fas fa-user-plus ml-2"></i></button>
        </div>
    </section>

    <div id="login-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-login-modal" class="modal-close-btn">&times;</button>
            <h3 class="text-2xl font-semibold mb-6 text-center hubverse-title">Đăng Nhập HUBverse</h3>
            <form id="login-form">
                <div>
                    <label for="login-email" class="form-label">Email</label>
                    <input type="email" id="login-email" class="form-input" placeholder="nhapemail@hub.edu.vn" required>
                </div>
                <div>
                    <label for="login-password" class="form-label">Mật khẩu</label>
                    <input type="password" id="login-password" class="form-input" placeholder="********" required>
                </div>
                <button type="submit" class="form-button mt-4">Đăng Nhập</button>
                <p class="text-xs text-center mt-4 text-gray-500">Chưa có tài khoản? <a href="#" id="show-register-from-login" class="text-orange-500 hover:underline">Đăng ký ngay</a></p>
            </form>
        </div>
    </div>

    <div id="register-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-register-modal" class="modal-close-btn">&times;</button>
            <h3 class="text-2xl font-semibold mb-6 text-center hubverse-title">Đăng Ký Tài Khoản HUBverse</h3>
            <form id="register-form">
                <div>
                    <label for="register-name" class="form-label">Họ và Tên</label>
                    <input type="text" id="register-name" class="form-input" placeholder="Nguyễn Văn A" required>
                </div>
                <div>
                    <label for="register-phone" class="form-label">Số điện thoại</label>
                    <input type="tel" id="register-phone" class="form-input" placeholder="09xxxxxxxx" required>
                </div>
                <div>
                    <label for="register-dob" class="form-label">Ngày sinh</label>
                    <input type="date" id="register-dob" class="form-input" required>
                </div>
                <div>
                    <label for="register-email" class="form-label">Email</label>
                    <input type="email" id="register-email" class="form-input" placeholder="emailcuaban@hub.edu.vn" required>
                </div>
                <div>
                    <label for="register-password" class="form-label">Mật khẩu</label>
                    <input type="password" id="register-password" class="form-input" placeholder="Tạo mật khẩu" required>
                </div>
                   <div>
                    <label for="register-confirm-password" class="form-label">Xác nhận mật khẩu</label>
                    <input type="password" id="register-confirm-password" class="form-input" placeholder="Nhập lại mật khẩu" required>
                </div>
                <button type="submit" class="form-button mt-4">Đăng Ký</button>
                   <p class="text-xs text-center mt-4 text-gray-500">Đã có tài khoản? <a href="#" id="show-login-from-register" class="text-orange-500 hover:underline">Đăng nhập</a></p>
            </form>
        </div>
    </div>

    <div id="share-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-share-modal" class="modal-close-btn">&times;</button>
            <h3 class="text-xl font-semibold mb-4 text-center">Chia sẻ bài viết</h3>
            <p class="text-center text-gray-600 mb-4">Chọn bạn bè để chia sẻ bài viết này:</p>
            <div id="share-friend-list" class="share-friend-list">
                <!-- Friends will be dynamically loaded here -->
            </div>
            <div class="text-center">
                <button id="confirm-share-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-semibold py-2 px-6 rounded-lg">Chia sẻ</button>
            </div>
        </div>
    </div>


    <footer id="contact" class="footer text-white py-16">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10 mb-8">
                <div><h3 class="text-3xl font-bold mb-4 hubverse-title" style="color: #ffffff;">HUBverse</h3><p class="text-gray-300 leading-relaxed">Nền tảng sinh viên vì sinh viên, bởi sinh viên HUB.</p><p class="text-gray-400 mt-2 text-sm">Trường Đại học Ngân hàng TP.HCM (HUB)</p></div>
                <div><h4 class="text-xl font-semibold mb-4 text-cyan-300">Khám Phá</h4><ul class="space-y-2"><li><a href="#" data-target-page="home" class="page-router-link">Tổng Quan Tính Năng</a></li><li><a href="#" data-target-page="marketplace" class="page-router-link">Chợ Sinh Viên</a></li><li><a href="#" data-target-page="digital-library" class="page-router-link">Thư Viện Tri Thức</a></li><li><a href="#" data-target-page="news-events" class="page-router-link">Tin Tức & Sự Kiện</a></li><li><a href="#" data-target-page="ai-chatbot" class="page-router-link">Trợ Lý AI</a></li><li><a href="#" data-target-page="social-networking" class="page-router-link">HUB Connection</a></li></ul></div>
                <div><h4 class="text-xl font-semibold mb-4 text-cyan-300">Kết Nối Với HUBverse</h4><div class="flex space-x-5 mb-4"><a href="#" class="text-gray-300 hover:text-white text-2xl social-icon"><i class="fab fa-facebook-square"></i></a><a href="#" class="text-gray-300 hover:text-white text-2xl social-icon"><i class="fab fa-instagram-square"></i></a><a href="#" class="text-gray-300 hover:text-white text-2xl social-icon"><i class="fab fa-youtube-square"></i></a><a href="#" class="text-gray-300 hover:text-white text-2xl social-icon"><i class="fab fa-tiktok"></i></a></div><p class="text-gray-300 text-sm">Email: <a href="mailto:support@hubverse.edu.vn" class="hover:underline">support@hubverse.edu.vn</a></p><p class="text-gray-300 text-sm">Hotline: <a href="tel:19001234" class="hover:underline">1900.1234</a> (Giờ hành chính)</p></div>
            </div>
            <div class="mt-10 pt-8 border-t border-gray-700 text-center text-gray-400 text-sm"><p>&copy; <span id="currentYear">2025</span> HUBverse Team. All rights reserved.</p><p>Một sản phẩm từ <i class="fas fa-heart text-red-500"></i> của sinh viên HUB.</p></div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Three.js Hero Animation - Starfield
            const heroSection = document.querySelector('.hero-section');
            const canvas = document.getElementById('hero-3d-canvas');
            if (heroSection && canvas && typeof THREE !== 'undefined') {
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, heroSection.offsetWidth / heroSection.offsetHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
                renderer.setSize(heroSection.offsetWidth, heroSection.offsetHeight);
                renderer.setClearColor(0x000000, 0); // Transparent background for canvas to show CSS background

                const starCount = 5000; // Number of stars
                const starGeometry = new THREE.BufferGeometry();
                const starVertices = [];

                // Generate random positions for stars
                for (let i = 0; i < starCount; i++) {
                    const x = (Math.random() * 2 - 1) * 100; // Spread stars across a wide area
                    const y = (Math.random() * 2 - 1) * 100;
                    const z = (Math.random() * 2 - 1) * 100;
                    starVertices.push(x, y, z);
                }
                starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));

                // Create a simple white dot texture for stars
                const starTexture = new THREE.CanvasTexture(
                    (() => {
                        const canvas = document.createElement('canvas');
                        canvas.width = 16;
                        canvas.height = 16;
                        const context = canvas.getContext('2d');
                        context.fillStyle = 'white';
                        context.beginPath();
                        context.arc(8, 8, 8, 0, Math.PI * 2);
                        context.fill();
                        return canvas;
                    })()
                );

                const starMaterial = new THREE.PointsMaterial({
                    color: 0xffffff,
                    size: 0.2, // Size of each star
                    map: starTexture,
                    transparent: true,
                    blending: THREE.AdditiveBlending, // For a glowing effect
                    sizeAttenuation: true // Stars appear smaller further away
                });

                const stars = new THREE.Points(starGeometry, starMaterial);
                scene.add(stars);

                camera.position.z = 50; // Adjust camera to see the starfield

                let mouseX = 0, mouseY = 0;
                if(heroSection.offsetWidth > 768) { // Only enable mouse move on larger screens
                    document.addEventListener('mousemove', (event) => {
                        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                    });
                }

                function animate() {
                    requestAnimationFrame(animate);

                    // Slowly rotate the entire starfield
                    stars.rotation.x += 0.0001;
                    stars.rotation.y += 0.0002;

                    // Simulate movement of stars (e.g., drifting towards the camera)
                    const positions = starGeometry.attributes.position.array;
                    for (let i = 2; i < positions.length; i += 3) {
                        positions[i] -= 0.1; // Move stars along Z-axis

                        // If a star moves too close, reset its position to the far end
                        if (positions[i] < -100) {
                            positions[i] = 100;
                            positions[i-1] = (Math.random() * 2 - 1) * 100; // Reset Y
                            positions[i-2] = (Math.random() * 2 - 1) * 100; // Reset X
                        }
                    }
                    starGeometry.attributes.position.needsUpdate = true; // Tell Three.js to update buffer

                    if(heroSection.offsetWidth > 768) {
                        // Apply subtle camera parallax based on mouse position
                        camera.position.x += (mouseX * 5 - camera.position.x) * 0.01;
                        camera.position.y += (mouseY * 5 - camera.position.y) * 0.01;
                    }
                    camera.lookAt(scene.position);

                    renderer.render(scene, camera);
                }
                animate();

                window.addEventListener('resize', () => {
                    camera.aspect = heroSection.offsetWidth / heroSection.offsetHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(heroSection.offsetWidth, heroSection.offsetHeight);
                });
            }


            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.onerror = function() {
                    let width = parseInt(img.getAttribute('width')) || parseInt(img.style.width) || 200;
                    let height = parseInt(img.getAttribute('height')) || parseInt(img.style.height) || 200;

                    // Ensure width and height are numbers, default to 200 if not
                    if (isNaN(width) || width <= 0) width = 200;
                    if (isNaN(height) || height <= 0) height = 200;

                    this.src = `https://placehold.co/${width}x${height}/E9ECEF/6C757D?text=Ảnh+Lỗi`;
                    this.alt = 'Ảnh lỗi';
                    console.warn(`Failed to load image: ${this.src}. Displaying placeholder for ${width}x${height}.`);
                };
            });
            const currentYearSpan = document.getElementById('currentYear');
            if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
            const socialCurrentYearSpan = document.getElementById('socialCurrentYear');
             if (socialCurrentYearSpan) socialCurrentYearSpan.textContent = new Date().getFullYear();


            const geminiChatMessages = document.getElementById('gemini-chat-messages');
            const geminiChatInput = document.getElementById('gemini-chat-input');
            const geminiSendButton = document.getElementById('gemini-send-button');

            // Chat history for Gemini API
            let chatHistory = [
                { role: "user", parts: [{ text: "Xin chào! Mình là HUB AI, người bạn đồng hành học tập của bạn. Bạn cần hỗ trợ gì hôm nay?" }] },
                { role: "model", parts: [{ text: "Chào bạn! Thông tin về đăng ký học phần hè thường được cập nhật trên cổng thông tin sinh viên của trường. Bạn có thể tìm thấy hướng dẫn chi tiết và lịch đăng ký tại đó. Ngoài ra, mình có thể giúp bạn giải đáp các câu hỏi về các môn học, thủ tục hành chính, hoặc gợi ý tài liệu học tập. Bạn muốn hỏi gì thêm không?" }] }
            ];

            function addGeminiMessage(message, sender, messageId = null) {
                if (!geminiChatMessages) return;
                const bubbleDiv = document.createElement('div');
                bubbleDiv.classList.add('gemini-chat-bubble', sender);
                if (messageId) {
                    bubbleDiv.id = messageId;
                }

                const avatarDiv = document.createElement('div');
                avatarDiv.classList.add('avatar');
                if (sender === 'user') {
                    avatarDiv.classList.add('avatar-user');
                    avatarDiv.textContent = 'SV';
                } else {
                    avatarDiv.classList.add('avatar-ai');
                    const icon = document.createElement('i');
                    icon.classList.add('fas', 'fa-brain');
                    avatarDiv.appendChild(icon);
                }

                const messageContentDiv = document.createElement('div');
                messageContentDiv.classList.add('message-content');
                messageContentDiv.innerHTML = `<p>${message.replace(/\n/g, '<br>')}</p>`;

                bubbleDiv.appendChild(avatarDiv);
                bubbleDiv.appendChild(messageContentDiv);
                if (sender === 'user') {
                    bubbleDiv.innerHTML = '';
                    bubbleDiv.appendChild(messageContentDiv);
                    bubbleDiv.appendChild(avatarDiv);
                }

                geminiChatMessages.appendChild(bubbleDiv);
                geminiChatMessages.scrollTop = geminiChatMessages.scrollHeight;
            }

            async function getGeminiResponse(prompt) {
                // Add user message to chat history
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide the API key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        // Add AI response to chat history
                        chatHistory.push({ role: "model", parts: [{ text: text }] });
                        return text;
                    } else {
                        console.error("Unexpected API response structure:", result);
                        return "Xin lỗi, tôi không thể tạo phản hồi lúc này. Vui lòng thử lại sau.";
                    }
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    return "Đã xảy ra lỗi khi kết nối với AI. Vui lòng kiểm tra kết nối mạng của bạn.";
                }
            }


            if (geminiSendButton) {
                geminiSendButton.addEventListener('click', async () => {
                    const userMessage = geminiChatInput.value.trim();
                    if (userMessage) {
                        addGeminiMessage(userMessage, 'user');
                        geminiChatInput.value = '';
                        
                        // Show a typing indicator or a "processing" message
                        const processingMessageId = 'processing-msg-' + Date.now();
                        addGeminiMessage('HUB AI đang suy nghĩ...', 'ai', processingMessageId);

                        const aiResponse = await getGeminiResponse(userMessage);
                        
                        // Remove the processing message (if still there)
                        const existingProcessingMessage = document.getElementById(processingMessageId);
                        if (existingProcessingMessage) {
                            existingProcessingMessage.remove();
                        }

                        addGeminiMessage(aiResponse, 'ai');
                    }
                });
            }
            if (geminiChatInput) {
                geminiChatInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter' && !event.shiftKey) {
                        event.preventDefault();
                        if (geminiSendButton) geminiSendButton.click();
                    }
                });
            }

            // --- Page Router Logic ---
            const pageRouterLinks = document.querySelectorAll('.page-router-link');
            const pageContentSections = document.querySelectorAll('.page-content-section');
            const mainNavLinks = document.querySelectorAll('header nav .nav-link'); // For active nav link styling

            function showPage(targetPageId) {
                pageContentSections.forEach(section => {
                    section.classList.remove('active-page');
                    section.style.display = 'none'; // Ensure it's hidden
                });

                mainNavLinks.forEach(link => link.classList.remove('active-nav-link'));

                if (targetPageId === 'home') {
                    const hero = document.getElementById('hero-section');
                    const features = document.getElementById('features-overview');
                    if (hero) { hero.classList.add('active-page'); hero.style.display = 'block';}
                    if (features) { features.classList.add('active-page'); features.style.display = 'block';}
                    const homeNavLink = document.querySelector('header nav .nav-link[data-target-page="home"]');
                    if(homeNavLink) homeNavLink.classList.add('active-nav-link');
                } else {
                    const targetSection = document.getElementById(targetPageId);
                    if (targetSection) {
                        targetSection.classList.add('active-page');
                        targetSection.style.display = 'block'; // Or 'flex'/'grid' if needed by section
                         const activeNavLink = document.querySelector(`header nav .nav-link[data-target-page="${targetPageId}"]`);
                        if(activeNavLink) activeNavLink.classList.add('active-nav-link');
                    } else { // Fallback to home if target not found
                        const hero = document.getElementById('hero-section');
                        const features = document.getElementById('features-overview');
                        if (hero) { hero.classList.add('active-page'); hero.style.display = 'block';}
                        if (features) { features.classList.add('active-page'); features.style.display = 'block';}
                         const homeNavLink = document.querySelector('header nav .nav-link[data-target-page="home"]');
                        if(homeNavLink) homeNavLink.classList.add('active-nav-link');
                    }
                }
                window.scrollTo(0,0); // Scroll to top on page change
            }

            pageRouterLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    const targetPage = this.dataset.targetPage;
                    if (targetPage) {
                        showPage(targetPage);
                    }
                });
            });
            // Show initial page (home)
            showPage('home');


            // --- Marketplace & Library Filter Logic ---
            function setupFilterLogic(type) {
                const prefix = type === 'library' ? 'library-' : '';
                const mainCategorySelect = document.getElementById(`filter-main-category-${type}`);
                const mainSpecTabsContainer = document.getElementById(`${prefix}main-specialization-tabs-container`);
                const mainSpecTabs = mainSpecTabsContainer ? mainSpecTabsContainer.querySelectorAll(`.${prefix}category-tab-item`) : [];

                const subSpecTabsOuterContainer = document.getElementById(`${prefix}sub-specialization-tabs-container`);
                const allSubSpecContainers = subSpecTabsOuterContainer ? subSpecTabsOuterContainer.querySelectorAll(`.${prefix}sub-specialization-tabs`) : [];

                const itemGrid = document.getElementById(type === 'library' ? 'document-grid' : 'product-grid');
                const allItems = itemGrid ? Array.from(itemGrid.children) : [];
                const filterButton = document.getElementById(`filter-results-button-${type}`);

                function hideAllSubSpecContainers() {
                    if (allSubSpecContainers && subSpecTabsOuterContainer) {
                        allSubSpecContainers.forEach(container => container.classList.remove('active'));
                        subSpecTabsOuterContainer.classList.remove('active');
                    }
                }

                function activateTab(tabs, clickedTab) {
                    if (!tabs) return;
                    tabs.forEach(t => t.classList.remove('active-tab'));
                    if (clickedTab) clickedTab.classList.add('active-tab');
                }

                if (mainCategorySelect && mainSpecTabsContainer) {
                    mainCategorySelect.addEventListener('change', function() {
                        if (this.value === 'chuyen-nganh') {
                            mainSpecTabsContainer.classList.add('active');
                            const allMainSpecsTab = mainSpecTabsContainer.querySelector(`.${prefix}category-tab-item[data-main-spec="all-main-specs"]`);
                            activateTab(mainSpecTabs, allMainSpecsTab);
                            hideAllSubSpecContainers();
                        } else {
                            mainSpecTabsContainer.classList.remove('active');
                            hideAllSubSpecContainers();
                        }
                    });
                }

                if (mainSpecTabs) {
                    mainSpecTabs.forEach(tab => {
                        tab.addEventListener('click', function() {
                            activateTab(mainSpecTabs, this);
                            const mainSpecValue = this.dataset.mainSpec;
                            const hasSubs = this.dataset.hasSubs === 'true';

                            hideAllSubSpecContainers();

                            if (mainSpecValue !== 'all-main-specs' && hasSubs) {
                                const subContainerToShow = document.getElementById(`${prefix}subs-${mainSpecValue}`);
                                if (subContainerToShow) {
                                    subContainerToShow.classList.add('active');
                                    if (subSpecTabsOuterContainer) subSpecTabsOuterContainer.classList.add('active');
                                    const firstSubTab = subContainerToShow.querySelector(`.${prefix}sub-category-tab-item`);
                                    activateTab(subContainerToShow.querySelectorAll(`.${prefix}sub-category-tab-item`), firstSubTab);
                                }
                            }
                        });
                    });
                }

                if (allSubSpecContainers) {
                    allSubSpecContainers.forEach(container => {
                        const subTabs = container.querySelectorAll(`.${prefix}sub-category-tab-item`);
                        subTabs.forEach(subTab => {
                            subTab.addEventListener('click', function() {
                               activateTab(subTabs, this);
                            });
                        });
                    });
                }

                if (mainCategorySelect && mainSpecTabsContainer) {
                    if (mainCategorySelect.value === 'chuyen-nganh') {
                        mainSpecTabsContainer.classList.add('active');
                        const allMainSpecsTab = mainSpecTabsContainer.querySelector(`.${prefix}category-tab-item[data-main-spec="all-main-specs"]`);
                        activateTab(mainSpecTabs, allMainSpecsTab);
                        hideAllSubSpecContainers();
                    } else {
                        mainSpecTabsContainer.classList.remove('active');
                        hideAllSubSpecContainers();
                    }
                }


                if (filterButton) {
                    filterButton.addEventListener('click', function() {
                        const selectedMainCategory = mainCategorySelect.value;
                        let selectedMainSpec = '';
                        let selectedSubSpec = '';

                        if (selectedMainCategory === 'chuyen-nganh' && mainSpecTabsContainer && mainSpecTabsContainer.classList.contains('active')) {
                            const activeMainSpecTab = mainSpecTabsContainer.querySelector(`.${prefix}category-tab-item.active-tab`);
                            if (activeMainSpecTab) {
                                selectedMainSpec = activeMainSpecTab.dataset.mainSpec;
                                if (activeMainSpecTab.dataset.hasSubs === 'true' && selectedMainSpec !== 'all-main-specs') {
                                    const activeSubSpecContainer = document.getElementById(`${prefix}subs-${selectedMainSpec}`);
                                    if (activeSubSpecContainer && activeSubSpecContainer.classList.contains('active')) {
                                        const activeSubSpecTab = activeSubSpecContainer.querySelector(`.${prefix}sub-category-tab-item.active-tab`);
                                        if (activeSubSpecTab) selectedSubSpec = activeSubSpecTab.dataset.subSpec;
                                    }
                                }
                            }
                        }

                        console.log(`Filtering ${type} for: Main Cat: ${selectedMainCategory}, Main Spec: ${selectedMainSpec}, Sub Spec: ${selectedSubSpec}`);

                        allItems.forEach(item => {
                            let showItem = false;
                            const itemCategory = item.dataset.category;
                            const itemMainSpecTag = item.dataset.mainSpecTag;
                            const itemSubSpecTag = item.dataset.subSpecTag;

                            if (selectedMainCategory === 'all') {
                                showItem = true;
                            } else if (itemCategory === selectedMainCategory) {
                                if (selectedMainCategory === 'chuyen-nganh') {
                                    if (selectedMainSpec === 'all-main-specs' || !selectedMainSpec) {
                                        showItem = true;
                                    } else if (itemMainSpecTag === selectedMainSpec) {
                                        const mainSpecTabEl = mainSpecTabsContainer.querySelector(`.${prefix}category-tab-item[data-main-spec="${selectedMainSpec}"]`);
                                        if (mainSpecTabEl && mainSpecTabEl.dataset.hasSubs === 'true') {
                                            if (selectedSubSpec === `all-${selectedMainSpec}-subs` || !selectedSubSpec || itemSubSpecTag === selectedSubSpec) {
                                                showItem = true;
                                            } else { showItem = false; }
                                        } else { showItem = true; }
                                    } else { showItem = false; }
                                } else {
                                    showItem = true;
                                }
                            } else { showItem = false; }
                            item.style.display = showItem ? (type === 'library' ? 'block' : 'flex') : 'none';
                        });
                    });
                }
            }

            setupFilterLogic('marketplace');
            setupFilterLogic('library');

            // News & Events Tab Logic
            const newsTabsMenu = document.getElementById('news-events-tabs-menu');
            const newsContentPanes = document.querySelectorAll('.news-event-content-pane');

            if (newsTabsMenu) {
                const newsTabs = newsTabsMenu.querySelectorAll('.news-event-tab-button');
                newsTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        newsTabs.forEach(t => t.classList.remove('active-news-tab'));
                        this.classList.add('active-news-tab');

                        const targetContentId = this.dataset.target;
                        newsContentPanes.forEach(pane => {
                            if (pane.id === targetContentId) {
                                pane.classList.add('active');
                            } else {
                                pane.classList.remove('active');
                            }
                        });
                    });
                });
            }

            // Modal Functionality
            const loginModal = document.getElementById('login-modal');
            const registerModal = document.getElementById('register-modal');
            const shareModal = document.getElementById('share-modal');
            const shareFriendList = document.getElementById('share-friend-list');

            const openLoginBtn = document.getElementById('open-login-modal');
            const closeLoginBtn = document.getElementById('close-login-modal');

            const openRegisterBtn = document.getElementById('open-register-modal'); // Updated to get the correct button
            const closeRegisterBtn = document.getElementById('close-register-modal');

            const showRegisterFromLogin = document.getElementById('show-register-from-login');
            const showLoginFromRegister = document.getElementById('show-login-from-register');

            const closeShareBtn = document.getElementById('close-share-modal');
            const confirmShareBtn = document.getElementById('confirm-share-btn');


            function openModal(modal) { if (modal) modal.classList.add('active'); }
            function closeModal(modal) { if (modal) modal.classList.remove('active'); }

            if (openLoginBtn) openLoginBtn.addEventListener('click', (e) => { e.preventDefault(); openModal(loginModal); });
            if (closeLoginBtn) closeLoginBtn.addEventListener('click', () => closeModal(loginModal));

            if (openRegisterBtn) openRegisterBtn.addEventListener('click', (e) => { e.preventDefault(); openModal(registerModal); });
            if (closeRegisterBtn) closeRegisterBtn.addEventListener('click', () => closeModal(registerModal));

            if (showRegisterFromLogin) {
                showRegisterFromLogin.addEventListener('click', (e) => {
                    e.preventDefault();
                    closeModal(loginModal);
                    openModal(registerModal);
                });
            }
            if (showLoginFromRegister) {
                showLoginFromRegister.addEventListener('click', (e) => {
                    e.preventDefault();
                    closeModal(registerModal);
                    openModal(loginModal);
                });
            }

            [loginModal, registerModal, shareModal].forEach(modal => {
                if (modal) {
                    modal.addEventListener('click', (event) => {
                        if (event.target === modal) {
                            closeModal(modal);
                        }
                    });
                }
            });

            // Dummy friend data for sharing
            const friends = [
                { id: 'friend1', name: 'Nguyễn Văn A', avatar: 'https://placehold.co/32x32/FFD1DC/FF69B4?text=A' },
                { id: 'friend2', name: 'Trần Thị B', avatar: 'https://placehold.co/32x32/D4EDDA/28A745?text=B' },
                { id: 'friend3', name: 'Lê Văn C', avatar: 'https://placehold.co/32x32/ADD8E6/000080?text=C' },
                { id: 'friend4', name: 'Phạm Thị D', avatar: 'https://placehold.co/32x32/FFFACD/DAA520?text=D' },
                { id: 'friend5', name: 'Hoàng Văn E', avatar: 'https://placehold.co/32x32/E6E6FA/800080?text=E' },
            ];

            // Social Post Interactions
            const instaPosts = document.querySelectorAll('.insta-post-card');
            instaPosts.forEach(post => {
                const likeBtn = post.querySelector('.like-btn');
                const likeCountSpan = post.querySelector('.like-count');
                const commentTriggers = post.querySelectorAll('.comment-btn, .insta-post-comments-link');
                const commentsSection = post.querySelector('.insta-post-comments-section');
                const shareBtn = post.querySelector('.share-btn');
                const saveBtn = post.querySelector('.save-btn');

                if (likeBtn && likeCountSpan) {
                    let liked = false;
                    let currentLikes = parseInt(likeCountSpan.textContent);
                    likeBtn.addEventListener('click', () => {
                        liked = !liked;
                        if (liked) {
                            likeBtn.classList.add('liked');
                            likeBtn.innerHTML = '<i class="fas fa-heart"></i>';
                            currentLikes++;
                        } else {
                            likeBtn.classList.remove('liked');
                            likeBtn.innerHTML = '<i class="far fa-heart"></i>';
                            currentLikes--;
                        }
                        likeCountSpan.textContent = currentLikes;
                    });
                }

                if (commentTriggers.length > 0 && commentsSection) {
                    commentTriggers.forEach(trigger => {
                        trigger.addEventListener('click', (e) => {
                            e.preventDefault();
                            commentsSection.classList.toggle('active');
                            if (commentsSection.classList.contains('active')) {
                                const commentInput = post.querySelector('.insta-post-add-comment input');
                                if (commentInput) commentInput.focus();
                            }
                        });
                    });
                }


                if (shareBtn && shareModal && closeShareBtn && confirmShareBtn && shareFriendList) {
                    shareBtn.addEventListener('click', () => {
                        // Clear previous friend list
                        shareFriendList.innerHTML = '';
                        // Populate friend list
                        friends.forEach(friend => {
                            const friendItem = document.createElement('label');
                            friendItem.classList.add('share-friend-item');
                            friendItem.innerHTML = `
                                <input type="checkbox" name="share-friend" value="${friend.id}">
                                <img src="${friend.avatar}" alt="${friend.name} Avatar" class="avatar">
                                <span class="username">${friend.name}</span>
                            `;
                            shareFriendList.appendChild(friendItem);
                        });
                        openModal(shareModal);
                    });
                    if(closeShareBtn) closeShareBtn.addEventListener('click', () => closeModal(shareModal));
                    if(confirmShareBtn) confirmShareBtn.addEventListener('click', () => {
                        const selectedFriends = Array.from(shareFriendList.querySelectorAll('input[type="checkbox"]:checked'))
                                                        .map(checkbox => friends.find(f => f.id === checkbox.value).name);
                        if (selectedFriends.length > 0) {
                            console.log("Shared to:", selectedFriends.join(', '));
                            // In a real application, you'd send this data to a backend
                            alert(`Đã chia sẻ bài viết cho: ${selectedFriends.join(', ')}`); // Using alert for simplicity, would use custom modal in production
                        } else {
                            alert("Vui lòng chọn ít nhất một người bạn để chia sẻ.");
                        }
                        closeModal(shareModal);
                    });
                }

                if (saveBtn) {
                    saveBtn.addEventListener('click', () => {
                        saveBtn.classList.toggle('saved');
                        const icon = saveBtn.querySelector('i');
                        if (saveBtn.classList.contains('saved')) {
                            icon.classList.remove('far');
                            icon.classList.add('fas');
                        } else {
                            icon.classList.remove('fas');
                            icon.classList.add('far');
                        }
                    });
                }
            });

            // --- New: Magic Effect and Smooth Scroll for "Khám Phá Ngay" button ---
            const exploreNowBtn = document.getElementById('explore-now-btn');

            if (exploreNowBtn) {
                exploreNowBtn.addEventListener('click', function(event) {
                    event.preventDefault(); // Ngăn chặn hành vi mặc định của thẻ <a>

                    // Thêm class để kích hoạt hiệu ứng ánh sáng
                    this.classList.add('magic-effect');

                    // Lấy ID của phần tử cần cuộn tới từ thuộc tính href
                    const targetId = this.getAttribute('href').substring(1); // Lấy "features-overview"
                    const targetSection = document.getElementById(targetId);

                    // Sau khi hiệu ứng ánh sáng kết thúc (0.8 giây), thực hiện cuộn mượt mà
                    setTimeout(() => {
                        // Xóa class hiệu ứng sau khi animation hoàn tất
                        this.classList.remove('magic-effect');

                        if (targetSection) {
                            targetSection.scrollIntoView({
                                behavior: 'smooth' // Cuộn mượt mà
                            });
                        }
                    }, 800); // Thời gian này phải khớp với thời gian animation CSS (0.8s)
                });
            }
        });
    </script>

</body>
</html>
